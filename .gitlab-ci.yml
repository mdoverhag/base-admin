image: node:10.16.3-alpine

stages:
  - build
  - test
  - deploy

cache:
  paths:
  - node_modules/

build:
  stage: build

  script:
    - yarn
    - yarn build

  artifacts:
    paths:
      - build

test:
  stage: test

  variables:
    CI: "true"

  script:
    - yarn
    - yarn test

deploy:
  stage: deploy

  dependencies:
    - build

  script:
    - "find ."
